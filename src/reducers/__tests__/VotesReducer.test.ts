import '@testing-library/jest-dom';
import { votes, votesState } from '../VotesReducer';

const testData = [{"id":308952,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T14:27:52.000Z","value":1,"country_code":"GB"},{"id":308953,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T14:30:44.000Z","value":1,"country_code":"GB"},{"id":308954,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T14:30:49.000Z","value":0,"country_code":"GB"},{"id":308965,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:22:25.000Z","value":1,"country_code":"GB"},{"id":308966,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:22:31.000Z","value":1,"country_code":"GB"},{"id":308967,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:22:48.000Z","value":0,"country_code":"GB"},{"id":308968,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:24:01.000Z","value":0,"country_code":"GB"},{"id":308969,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:24:57.000Z","value":0,"country_code":"GB"},{"id":308970,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:25:07.000Z","value":1,"country_code":"GB"},{"id":308971,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:26:45.000Z","value":1,"country_code":"GB"},{"id":308972,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:26:56.000Z","value":1,"country_code":"GB"},{"id":308989,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:48:40.000Z","value":1,"country_code":"GB"},{"id":308990,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:48:43.000Z","value":0,"country_code":"GB"},{"id":308991,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T15:48:45.000Z","value":1,"country_code":"GB"},{"id":308997,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T15:50:38.000Z","value":1,"country_code":"GB"},{"id":309015,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T16:09:28.000Z","value":1,"country_code":"GB"},{"id":309016,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T16:18:29.000Z","value":1,"country_code":"GB"},{"id":309017,"image_id":"dmWtt409G","sub_id":null,"created_at":"2021-06-22T16:18:31.000Z","value":0,"country_code":"GB"},{"id":309018,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T16:18:32.000Z","value":0,"country_code":"GB"},{"id":309019,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T16:18:33.000Z","value":0,"country_code":"GB"},{"id":309023,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T16:56:08.000Z","value":1,"country_code":"GB"},{"id":309024,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T16:56:10.000Z","value":0,"country_code":"GB"},{"id":309025,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T16:56:14.000Z","value":1,"country_code":"GB"},{"id":309026,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T16:56:15.000Z","value":0,"country_code":"GB"},{"id":309027,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T17:03:53.000Z","value":0,"country_code":"GB"},{"id":309028,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T17:03:58.000Z","value":1,"country_code":"GB"},{"id":309029,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T17:03:59.000Z","value":1,"country_code":"GB"},{"id":309030,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T17:04:01.000Z","value":1,"country_code":"GB"},{"id":309034,"image_id":"neUyIzN1f","sub_id":null,"created_at":"2021-06-22T20:09:14.000Z","value":1,"country_code":"GB"},{"id":309035,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T20:12:18.000Z","value":1,"country_code":"GB"},{"id":309037,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T20:12:19.000Z","value":1,"country_code":"GB"},{"id":309036,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T20:12:19.000Z","value":1,"country_code":"GB"},{"id":309039,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T20:12:20.000Z","value":1,"country_code":"GB"},{"id":309038,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-22T20:12:20.000Z","value":1,"country_code":"GB"},{"id":309043,"image_id":"pPJWt3iCn","sub_id":null,"created_at":"2021-06-22T20:12:21.000Z","value":0,"country_code":"GB"},{"id":309042,"image_id":"pPJWt3iCn","sub_id":null,"created_at":"2021-06-22T20:12:21.000Z","value":0,"country_code":"GB"},{"id":309041,"image_id":"pPJWt3iCn","sub_id":null,"created_at":"2021-06-22T20:12:21.000Z","value":0,"country_code":"GB"},{"id":309040,"image_id":"pPJWt3iCn","sub_id":null,"created_at":"2021-06-22T20:12:21.000Z","value":0,"country_code":"GB"},{"id":309046,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T20:12:23.000Z","value":1,"country_code":"GB"},{"id":309044,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T20:12:23.000Z","value":1,"country_code":"GB"},{"id":309045,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-22T20:12:23.000Z","value":1,"country_code":"GB"},{"id":309099,"image_id":"GK23tOrUl","sub_id":null,"created_at":"2021-06-23T06:12:15.000Z","value":1,"country_code":"GB"},{"id":309100,"image_id":"pPJWt3iCn","sub_id":null,"created_at":"2021-06-23T06:26:41.000Z","value":1,"country_code":"GB"},{"id":309101,"image_id":"neUyIzN1f","sub_id":null,"created_at":"2021-06-23T06:27:40.000Z","value":0,"country_code":"GB"},{"id":309102,"image_id":"uAqMBQ_Qo","sub_id":null,"created_at":"2021-06-23T06:28:52.000Z","value":0,"country_code":"GB"},{"id":309104,"image_id":"XCT97UyOL","sub_id":null,"created_at":"2021-06-23T06:54:34.000Z","value":1,"country_code":"GB"},{"id":309105,"image_id":"pPJWt3iCn","sub_id":null,"created_at":"2021-06-23T06:54:35.000Z","value":1,"country_code":"GB"},{"id":309106,"image_id":"pPJWt3iCn","sub_id":null,"created_at":"2021-06-23T06:54:37.000Z","value":1,"country_code":"GB"},{"id":309107,"image_id":"pPJWt3iCn","sub_id":null,"created_at":"2021-06-23T06:54:37.000Z","value":1,"country_code":"GB"},{"id":309108,"image_id":"pPJWt3iCn","sub_id":null,"created_at":"2021-06-23T06:54:37.000Z","value":1,"country_code":"GB"},{"id":309321,"image_id":"yypND5olK","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-23T16:35:59.000Z","value":1,"country_code":"GB"},{"id":309350,"image_id":"v2B3HVDyW","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-23T22:48:48.000Z","value":1,"country_code":"GB"},{"id":309351,"image_id":"_yoIujRSq","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-23T23:04:00.000Z","value":0,"country_code":"GB"},{"id":309352,"image_id":"61DtNWnsM","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-23T23:13:45.000Z","value":1,"country_code":"GB"},{"id":309353,"image_id":"Xn6JE9TmR","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-23T23:13:46.000Z","value":1,"country_code":"GB"},{"id":309354,"image_id":"hTSwzpTik","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-23T23:13:47.000Z","value":1,"country_code":"GB"},{"id":309359,"image_id":"wkivlK7x3","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T00:53:29.000Z","value":0,"country_code":"GB"},{"id":309379,"image_id":"wkivlK7x3","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-24T07:21:45.000Z","value":1,"country_code":"GB"},{"id":309381,"image_id":"370BCaa7x","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T07:52:52.000Z","value":1,"country_code":"GB"},{"id":309408,"image_id":"370BCaa7x","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-24T09:40:45.000Z","value":1,"country_code":"GB"},{"id":309413,"image_id":"AJXb4_XZT","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-24T10:11:25.000Z","value":0,"country_code":"GB"},{"id":309414,"image_id":"nAI32OuDC","sub_id":"e2f29a8f-f2c5-4327-a64c-65435ab52b53","created_at":"2021-06-24T10:49:06.000Z","value":1,"country_code":"GB"},{"id":309415,"image_id":"AJXb4_XZT","sub_id":"e2f29a8f-f2c5-4327-a64c-65435ab52b53","created_at":"2021-06-24T10:49:09.000Z","value":1,"country_code":"GB"},{"id":309416,"image_id":"EYuOqI8ro","sub_id":"e2f29a8f-f2c5-4327-a64c-65435ab52b53","created_at":"2021-06-24T10:49:11.000Z","value":1,"country_code":"GB"},{"id":309417,"image_id":"nNGk5DnDC","sub_id":"e2f29a8f-f2c5-4327-a64c-65435ab52b53","created_at":"2021-06-24T10:49:14.000Z","value":1,"country_code":"GB"},{"id":309418,"image_id":"YOAGET02s","sub_id":"e2f29a8f-f2c5-4327-a64c-65435ab52b53","created_at":"2021-06-24T10:49:16.000Z","value":1,"country_code":"GB"},{"id":309419,"image_id":"Akv20E4ya","sub_id":"e2f29a8f-f2c5-4327-a64c-65435ab52b53","created_at":"2021-06-24T10:49:16.000Z","value":0,"country_code":"GB"},{"id":309420,"image_id":"nXkz5ipUa","sub_id":"e2f29a8f-f2c5-4327-a64c-65435ab52b53","created_at":"2021-06-24T10:49:19.000Z","value":0,"country_code":"GB"},{"id":309421,"image_id":"GY25a2pyJ","sub_id":"e2f29a8f-f2c5-4327-a64c-65435ab52b53","created_at":"2021-06-24T10:49:20.000Z","value":1,"country_code":"GB"},{"id":309422,"image_id":"nNGk5DnDC","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-24T10:49:30.000Z","value":1,"country_code":"GB"},{"id":309423,"image_id":"YOAGET02s","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-24T10:49:37.000Z","value":1,"country_code":"GB"},{"id":309424,"image_id":"nXkz5ipUa","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-24T10:49:41.000Z","value":0,"country_code":"GB"},{"id":309425,"image_id":"EYuOqI8ro","sub_id":"289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3","created_at":"2021-06-24T10:49:44.000Z","value":1,"country_code":"GB"},{"id":309426,"image_id":"Nwo1dV2Lm","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:08.000Z","value":1,"country_code":"GB"},{"id":309427,"image_id":"nAI32OuDC","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:09.000Z","value":1,"country_code":"GB"},{"id":309428,"image_id":"Akv20E4ya","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:10.000Z","value":0,"country_code":"GB"},{"id":309429,"image_id":"YOAGET02s","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:11.000Z","value":1,"country_code":"GB"},{"id":309430,"image_id":"nNGk5DnDC","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:12.000Z","value":1,"country_code":"GB"},{"id":309431,"image_id":"zo3fVP_z8","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:13.000Z","value":1,"country_code":"GB"},{"id":309432,"image_id":"DsNPNwZhm","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:14.000Z","value":1,"country_code":"GB"},{"id":309433,"image_id":"nXkz5ipUa","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:15.000Z","value":0,"country_code":"GB"},{"id":309434,"image_id":"GY25a2pyJ","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:17.000Z","value":1,"country_code":"GB"},{"id":309435,"image_id":"EYuOqI8ro","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:18.000Z","value":1,"country_code":"GB"},{"id":309436,"image_id":"AJXb4_XZT","sub_id":"39a94416-ebaf-4fc2-849f-c81e51e6a4e2","created_at":"2021-06-24T10:50:20.000Z","value":1,"country_code":"GB"}];

test('default values initialised', () => {
    const state = votes(new votesState, {});
    expect(state.loaded).toEqual(false);
    expect(state.votes.size).toEqual(0);
});


test('get votes', () => {
    const state = votes(new votesState, {type: 'GETVOTES', votes: testData, my_id: "289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3"});
    expect(state.loaded).toEqual(true);
    expect(state.votes.size).toEqual(25);
    expect(state.votes.get("dmWtt409G")).toEqual(4);
    expect(state.myvotes.size).toEqual(13);
    expect(state.myvotes.get("yypND5olK")).toEqual(1);
});


test('add vote', () => {
    let initialState = votes(new votesState, {type: 'GETVOTES', votes: testData, my_id: "289bbeb3-dcbc-45b9-b9e5-e5e2f77d89d3"});
    const state = votes(initialState, {type: 'ADDVOTE', image_id: "dmWtt409G", value: 1});
    expect(state.votes.size).toEqual(25);
    expect(state.votes.get("dmWtt409G")).toEqual(5);
    expect(state.myvotes.size).toEqual(14);
    expect(state.myvotes.get("yypND5olK")).toEqual(1);
    expect(state.myvotes.get("dmWtt409G")).toEqual(1);
});
